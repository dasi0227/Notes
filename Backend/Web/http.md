## HTTP 版本

在这里主要列举，后一个版本相比于前一个版本的改进之处

HTTP/0.9：初代协议
- 支持一种请求方法：GET
- 没有头部
- 没有状态码
- 底层基于 TCP 协议
- 默认使用 80 端口
- 直接返回资源内容，只支持 HTML 文件
- **每个请求都必须新建一个连接**
- 报文内容明文传输

HTTP/1.0：增加元信息
- 支持三种请求方法：GET、HEAD、POST
- 增加了请求头和响应头，能够携带元信息
- 引入状态码，更清晰地反馈请求结果
- 增加简单缓存控制，提高重复请求效率
- 内容类型能够传输 HTML 文件以外的文档
- 只支持短连接，即每个请求都必须新建一个连接

HTTP/1.1：官方标准
- 支持七种请求方法：GET、HEAD、POST、OPTIONS、PUT、DELETE、TRACE
- **支持管道化，客户端在收到响应前连续发送多个请求**
- **支持长连接，同一 TCP 连接可复用**
- 更完备的缓存与协商机制，优化带宽利用
- 状态码进行了扩展
- 虚拟主机支持，让一台服务器承载多个域名

HTTP/2：性能优化
- 采用二进制分帧与流模型
- **支持多路复用，单一 TCP 连接可并发处理任意数量的双向流，消除队头阻塞**
- 支持头部压缩
- 允许服务器主动推送资源

HTTP/3：移动优化
- 基于 UDP 重建了 QUIC 传输机制
- 更快速的连接建立与恢复，适应移动网络环境
- 强制加密简化安全配置，提高传输安全性

HTTPS：安全优化
- 在 HTTP(x.x) 之上增加 SSL/TLS 加密层，报文全程加密，防止中间人攻击、窃听、篡改 
- 服务器需持有 CA 颁发的 X.509 证书，客户端验证证书链与域名
- 需要先进行 TLS 握手，建立安全信道后再传输 HTTP 报文
- 默认使用 443 端口

## HTTP 报文

报文格式
- 行：
  - 请求：<方法> <路径> <版本>
  - 响应：<版本> <状态码> <原因短语>
- 头：一系列以 `字段名: 值` 形式出现的行，携带元信息
- 空行：CRLF 分隔首部与消息体
- 体：
  - 请求：表单数据、JSON、XML 等
  - 响应：HTML、图片、视频、脚本等

MIME（Multipurpose Internet Mail Extensions） 是一种标准，用于在互联网中标识和描述各种媒体类型的数据格式
- 作用：让客户端／服务器这是个什么文件，如何解析传来的机器编码
- 格式：主类型/子类型[; 参数]
- 请求头的键：`Accept`
- 响应头的键：`Content-Type`
- 类型
  - 文本：`text/html; charset=utf-8`
  - 图像：`image/jpeg，image/png`
  - 音视频：`audio/mpeg，video/mp4`
  - 应用数据：`application/json，application/xml`

状态码
- 1xx：信息类
  - 100 Continue：客户端应继续发送请求的剩余部分
  - 101 Switching Protocols：服务器已理解客户端请求，并将使用不同协议进行通讯
- 2xx：成功类
  - 200 OK：请求已成功，请求所希望的响应头或数据体随之返回
  - 201 Created：请求已成功且服务器创建了新的资源
  - 204 No Content：服务器成功处理了请求，但不返回任何内容
- 3xx：重定向类
  - 301 Moved Permanently：所请求的资源已永久移动到新 URI，客户端以后应使用新地址
  - 302 Found：资源临时移动，客户端仍应继续使用原有 URI 进行请求
  - 304 Not Modified：客户端缓存的资源未修改，可直接使用本地缓存，减少带宽
- 4xx：客户端错误类
  - 400 Bad Request：请求报文有语法错误或参数不合法，服务器无法理解
  - 401 Unauthorized：请求未通过身份验证，需提供有效凭证
  - 403 Forbidden：服务器理解请求但拒绝执行，权限不足或禁止访问
  - 404 Not Found：所请求的资源不存在或已被删除
  - 405 Method Not Allowed：客户端请求中的 HTTP 方法不被服务器允许用于所请求的资源 URL
  - 408 Request Timeout：客户端在服务器规定的等待时间内未发送完整请求
  - 429 Too Many Requests：客户端在给定时间内发送了过多请求，被服务器限流
- 5xx：服务端错误类
  - 500 Internal Server Error：服务器遇到意外情况，无法完成请求
  - 502 Bad Gateway：服务器作为网关或代理，从上游服务器收到无效响应
  - 503 Service Unavailable：服务器当前不可访问，无法处理请求
  - 504 Gateway Timeout：服务器作为网关或代理，但未及时从上游服务器收到响应

