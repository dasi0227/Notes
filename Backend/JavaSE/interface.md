# Interface

接口的意义：**定义规范，统一行为，隔离实现**
- 让不同类之间拥有相同的“能力外壳”，便于多态调用和代码解耦
- 接口是一种面向行为编程的契约机制，谁实现它，就必须兑现承诺，实现所有规定方法

## interface

接口是一种特殊的引用类型，用 interface 定义，里面只包含**抽象方法和常量**，用来规定**类必须实现的行为规范**
- 所有方法都默认 `abstract public`：都是抽象方法
- 所有变量都默认 `public static final`：都是常量，因此可以用接口名去访问
- 接口的所有变量都必须在定义的时候就要赋值
- jdk8 之后可以有 static 方法和 default 方法
- 接口不能被实例化，因为它的作用是提供规范，而不是作为对象
- 接口的访问权限修饰符只能是 public 或 默认

## implements

- 如果非抽象类实现接口，那么必须实现其所有函数
- 抽象类实现接口，可以不用实现其所有函数
- 重写的方法必须是 public，因为原来的函数是 public，重写不能将访问限制升级，只能降级，而 public 是最低级
- 一个类可以同时实现多个接口，因为一个机器本来就是有多个接口，不像儿子只有一个爸爸
- 接口可以继承接口，而且还可以继承多个接口
- 接口不能继承类

| 比较项       | extends（继承）          | implements（实现接口）                              |
|--------------|----------------------|-----------------------------------------------|
| 作用对象     | 类（子类 → 父类）           | 接口（类 → 接口）                                    |
| 设计目标     | 复用代码，表示“是什么”         | 规范行为，表示“能做什么”                                 |
| 目标类型     | 继承一个类（只能一个）          | 实现一个或多个接口（支持多个）                               |
| 重写方法   | 父类可能已提供实现            | 必须实现接口中所有抽象方法                                 |
| 可继承内容   | 方法、属性、构造器            | 方法签名                                          |
| 是否有构造器 | 父类有构造器可被调用           | 接口不能有构造器                                      |
| 访问权限     | 受限于继承关系，允许 protected | 接口方法默认是 public                                |
| 场景示例     | `class Dog extends Animal` | `class Dog implements Runnable, Serializable` |

## 多态

```java
接口名 变量名 = new 实现类名();
```
**父接口的引用可以指向任何实现了该接口的类对象**
- 多态的本质（与类是一样的）：编译看左边，运行看右边
- 多态调用只能调用接口有的方法，不能调用类特有的方法
- 如果想调用类特有的方法，需要进行强制类型转换 `((类名)变量名).方法`，注意 `.` 运算符优先级高，因此需要还需要一个括号
- 多态传递：如果接口 A 继承了接口 B，那么类只要实现 A，也相当于实现了 B（因为必须实现接口 A 和接口 B 的所有方法）

```java
class C extends B implements A{}
```
- 如果 A、B、C 都有同名变量 x
	- C 使用 C：直接 x 或 this.x
	- C 使用 B：super.x
	- C 使用 A：A.x
- 如果 A、B 都有同名方法 f
	- C 重写了 f，那么就调用自己的重写的方法
	- C 没有重写 f，那么就调用 B 的方法
	- 即使 B 在定义 f 时并没有显式说明是为了实现 A ，但是 C 继承 B 也会继承同名方法 f，相当于 B 间接地帮 C 实现了接口方法的实现