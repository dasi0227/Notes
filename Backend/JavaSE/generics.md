# 泛型

## 类型

Java 泛型是一种参数化类型机制，可以在类、接口、方法中定义时使用占位符代表类型，使用时再指定具体类型，提高代码的复用性和类型安全性
- 类泛型：class Box<T1,T2,...> {...}
- 接口泛型：interface MyList<T1,T2,...> {...}
- 方法泛型：<T1, T2, ...> 返回类型 方法名(参数列表) { ... }

> 注意区分使用类泛型的方法和利用泛型的方法

## 常用符号

| 符号 | 含义             |
|----|----------------|
| T  | Type，任意类型      |
| E  | Element，集合元素类型 |
| K  | Key，键          |
| V  | Value，值        |
| ?  | 通配符，未知类型       |


## 边界指定

- \<?>：支持任意类型
- \<? extends A>：上界，只能是 A 或其子类
- \<? super A>：下界，只能是 A 或其父类

## 注意

- 泛型擦除：指定泛型类型是为了编译器而不是 JVM，也就是为了应付编译而不是应付运行，编译器会根据你传递的类型进行类型检查、自动类型推从而省去强转，编译通过后，编译器会直接用 Object 代替泛型参数
  - 不能 new T[]：因为运行时 T 已经被擦除，JVM 无法确定数组的真实类型
  - 不能 instanceof T：因为运行时没有 T 的类型信息，类型已被擦除，无法进行类型判断

- 类加载机制：类先加载再使用，静态内容属于类，不依赖对象
  - 静态变量/方法不能使用类的 T：因为静态变量/方法属于类级别，而泛型 T 是对象级别，类加载时还无法解析 T
  - 没有指定泛型参数时，默认使用 Object

- 泛型类型限制
  - 泛型只能是引用类型，不能是基本数据类型
  - 给泛型指定具体类型后，可以传入该类型或其子类类型